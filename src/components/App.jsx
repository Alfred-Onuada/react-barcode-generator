import { useState } from "react";
import JsBarCode from 'jsbarcode';

const App = () => {
  const [productInfo, setProoductInfo] = useState('');
  const [imgSrc, setImgSrc] = useState('data:image/png;base64,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XXbZJZx99tlh3XXXrVz3yy+/jGOQ+b3zzjvqGH744Yc4n/322y/stNNO4cYbb4zX/vXXX8NRRx0VTjnllLDYYotVrv3dd9+F2267Ldxxxx0RH8FN5rbbbrsNMPDiMOx1ywKZH+oEAiTiTixD/iAkmYWszjnnnNqLlDfr/vnnn3D55ZeH0047bdp7jzzyyHDJJZdEMi6IeNNNNw1z586NBDVnzpy46XfTTTfFz66zzjrhgQceiGQnJCwkLWSW/glh3X777WHNNdd0T1II+Nxzzw1bbrllePDBB+M4ij+57t133x1WW221+E9//vlnLAw333zztO/Zfffd478vscQS8bWCiDfYYIPwwQcfhMcee6zyGcFIrlU8gU7wOPjggwdFrnhzGYOChK04jGLd3ADzA51BgETcmaXIG0ihEEXdnXHGGWG55ZYL//77b1SO22+/fUURv/TSS2HPPfcMhx12WDjuuOMiMf3yyy9R4V566aWRdLfZZpsBEX/66aeReJdffvmw1VZbhWWXXTbcc8894aeffgq77rrr4NqiFA855JCokk888cT4vuK65513XlSOUijmm28+1yQLa0LUqShgGfeCCy4YxyBEKWM+/PDDB0QsZLvhhhuGjTfeOCywwAJxDFdccUX837PPPhuksJSJ+JlnngnbbbdduPDCC8P6668fvv7663DEEUfE9wjJCz4FwQs2MgYhZPn3H3/8MV5zo402Cqusskr8jAeHUaybC1y+uVMIkIg7tRy+wfz9999R3YoFIS25EGDxl3rE8txgIZy33347EkahDuX90nbvvffeYeuttw6nn376gIhF8V177bXx+nIU7qSTTorXePPNNwdH49Zee+3Yzv/222/TritK+eijjw7ffPNNtBeWXHJJ1wQLIhZSFCuhUKjff/99tBWEAEW9LrTQQup167zyQhHL54S8l1566cHnzz///Kh8i/G+99570X4Q60awLqyY9AsLW8OCgxSWUaybC1y+uVMIkIg7tRy+wRTJv8gii4Qrr7wyLLzwwioRN7XuxYdEZV500UXhs88+ix6xeKVCgAWZiRIt/7fYHmussUb8N7EtzjrrrGkTkHGJb1zYGJ4Zapt1xVzkWuV5f/7557FwPPnkk7GYlP/KFk1BxNqYy5977rnnompG57HRNcs4SNcixWvY6yZdAP9mJgIk4pm5bnHU0h6LMlxhhRU6TcRCqPfff39YddVVXWh7iPjDDz8MBx10UNworPvLJeLHH3887LzzzkMh4gIH6QxGsW4kYld4derNJOJOLYdvMIUyFDUmJyYWX3zxeIHyplxBQOIbi2L96quvwvXXXz/tVED5m4vNOosiXmuttaI/LNdPLQ/xaI855pjwxx9/VMZnnaVGxKLY99prr2iliJUg3rMoTvGhxaqQu/GK7qDJmrAo4ldffTUqYrmuzFP7rbiff/7ZjIMQpnQfw143K658X/cQIBF3b01cIyoI6Lrrros+r/i9sjklR87kr6wE5VjXgQceGM4888x4ZE280Tpi8RDxZpttFklQ/GMhwvImoBx/kw01Ictjjz1WJTFtwgURP/3003ETUQhXNtTkJIUo7EcffTT+u/zJd8gxNDletu2228Zi9Prrr8eTHPfdd18FB2QjlMcj/rb4w3J87oILLohH5+RkiRSZp556arBZJx68B4dRrJsrcPjmTiFAIu7UcvgHIwQhbW65JV9ppZXi7v7DDz8c1W/xrImmY2Zl0vYQsVz722+/jacX0mNgck05Oia+bXlDzDrLgojr3i9etpB/sXkmvrCo5PIRN/ncUkstFU8+CGkWOHiIWK7x4osvxsL1xRdfVIaSHl/z4DCKdbPiyvd1DwEScffWxD2iN954I8gxMbmpY8cdd4zHyJZZZpm44VYmYrlwceOFbJ4JwZT/CvXsJWK5Rt0ND+mNIt6JffLJJ3GjT8b57rvvxo8LmR566KHxRozyCQZRwA899FC46qqrYlFab731okUhR9bkjHQZBy8Ri9qV0xNSUJ5//vlIyKLE5brpODw4DHvdvPjy/d1BgETcnbXgSIgAEZhQBEjEE7rwnDYRIALdQYBE3J214EiIABGYUARIxBO68Jw2ESAC3UGARNydteBIiAARmFAESMQTuvCcNhEgAt1BgETcnbXgSIgAEZhQBEjEE7rwnDYRIALdQYBE3J214EiIABGYUARIxBO68Jw2ESAC3UHgf+dPmuofHvr/AAAAAElFTkSuQmCC');
  const [errorText, setErrorText] = useState('');

  const generateBarCode = () => {
    try {
      setProoductInfo(productInfo.trim());
  
      // UPC only accepts 12 digit inputs
      if (productInfo === "") {
        setErrorText('Cannot create a barcode with empty information')
        
        setTimeout(() => {
          // reset variables
          setErrorText('');
        }, 3000)
        return;
      }

      JsBarCode('#barcode-preview', productInfo, { displayValue: false });
  
      setImgSrc(document.getElementById('barcode-preview').src);
    } catch (error) {
      setErrorText(error);

      setTimeout(() => {
        // reset variables
        setErrorText('');
      }, 3000)
    }
  };

  return (
    <div className="container">
      { errorText && <h4 className="error-text">{errorText}</h4> }
      <div className="generation-half">
        <h1 className="welcome-text">Hi thereðŸ‘‹</h1>
        <h4 className="instructions-text">Please enter the product information you wish to encode below</h4>
        <textarea id="product-info" 
          rows={10} cols={30} 
          draggable={true} value={productInfo} 
          onChange={(e) => { setProoductInfo(e.target.value) }}/>
        <br/>
        <button className="btn" id="generate-btn" onClick={generateBarCode}>Generate Bar Code</button>
      </div>
      <div className="preview-half" >
        <img src={imgSrc} alt="Generated bar code" className="barcode-preview" id="barcode-preview" />
        <br/>
        <a href={imgSrc} className="btn-link" download={'barcode-'+productInfo.split(' ')[1]+'.png'}>Download Image</a>
      </div>
    </div>
  )
}

export default App;